# ğŸ—ï¸ Arquitectura del Sistema - Portfolio CMS
## ğŸ“Š Diagrama General
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENTE (Browser)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   Next.js    â”‚  â”‚  React SPA   â”‚  â”‚   Zustand    â”‚               â”‚
â”‚  â”‚  (Frontend)  â”‚  â”‚  Components  â”‚  â”‚    Store     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚                 â”‚                  â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                           â”‚                                         â”‚
â”‚                     HTTP/REST API                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND (FastAPI)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     API Layer (v1)                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  Auth  â”‚ â”‚Projectsâ”‚ â”‚  CMS   â”‚ â”‚  CV    â”‚ â”‚Settingsâ”‚     â”‚    â”‚
â”‚  â”‚  â”‚Endpointâ”‚ â”‚Endpointâ”‚ â”‚Endpointâ”‚ â”‚Endpointâ”‚ â”‚Endpointâ”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚          â”‚          â”‚          â”‚          â”‚               â”‚
â”‚         â–¼          â–¼          â–¼          â–¼          â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Middleware Layer                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚    CORS    â”‚  â”‚ JWT Auth   â”‚  â”‚   Error    â”‚              â”‚   â”‚
â”‚  â”‚  â”‚  Handler   â”‚  â”‚ Validation â”‚  â”‚  Handler   â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                       â”‚
â”‚                             â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Service Layer                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚  â”‚  â”‚   Auth   â”‚ â”‚ Project  â”‚ â”‚   CMS    â”‚ â”‚  Upload  â”‚         â”‚   â”‚
â”‚  â”‚  â”‚  Service â”‚ â”‚  Service â”‚ â”‚  Service â”‚ â”‚  Service â”‚         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚            â”‚            â”‚            â”‚                   â”‚
â”‚          â–¼            â–¼            â–¼            â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   ORM Layer (SQLAlchemy)                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚ User â”‚ â”‚Projecâ”‚ â”‚ Page â”‚ â”‚  CV  â”‚ â”‚Settinâ”‚ â”‚Uploadâ”‚       â”‚   â”‚
â”‚  â”‚  â”‚Model â”‚ â”‚ Modelâ”‚ â”‚Contenâ”‚ â”‚Model â”‚ â”‚ Modelâ”‚ â”‚ Modelâ”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚        â”‚        â”‚        â”‚        â”‚        â”‚
          â–¼        â–¼        â–¼        â–¼        â–¼        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE LAYER                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              PostgreSQL (Supabase)                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚ users  â”‚ â”‚projectsâ”‚ â”‚  page_ â”‚ â”‚   cv   â”‚ â”‚settingsâ”‚      â”‚   â”‚
â”‚  â”‚  â”‚        â”‚ â”‚        â”‚ â”‚ contentâ”‚ â”‚        â”‚ â”‚        â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚                                                              â”‚   â”‚
â”‚  â”‚   Row Level Security (RLS) Enabled                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Alembic Migrations                              â”‚   â”‚
â”‚  â”‚  Version control para esquema de base de datos               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STORAGE LAYER                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Railway Persistent Volume (/uploads)                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚   â”‚
â”‚  â”‚  â”‚  images/ â”‚ â”‚  files/  â”‚ â”‚ projects/â”‚                      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Flujo de AutenticaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚                                                    â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                                               â”‚
     â”‚  1. POST /api/v1/auth/login                                   â”‚
     â”‚    { email, password }                                        â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                                                               â”‚
     â”‚                     2. Validate credentials                   â”‚
     â”‚                        (bcrypt hash check)                    â”‚
     â”‚                                                               â”‚
     â”‚  3. JWT Token + User Data                                     â”‚
     â”‚     { access_token, user: {id, email, role} }                 â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                                               â”‚
     â”‚  4. Store token in Zustand + localStorage                     â”‚
     â”‚                                                               â”‚
     â”‚  5. GET /api/v1/projects                                      â”‚
     â”‚     Authorization: Bearer <JWT_TOKEN>                         â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                                                               â”‚
     â”‚                     6. Validate JWT token                     â”‚
     â”‚                        Extract user from token                â”‚
     â”‚                        Check permissions                      â”‚
     â”‚                                                               â”‚
     â”‚  7. Projects data                                             â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                                               â”‚
```

---

## ğŸ›¡ï¸ Sistema de Permisos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Permission System                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Role: ADMIN                                                â”‚
â”‚  â”œâ”€ view_content         âœ…                                 â”‚
â”‚  â”œâ”€ edit_content         âœ…                                 â”‚
â”‚  â”œâ”€ delete_content       âœ…                                 â”‚
â”‚  â”œâ”€ manage_users         âœ…                                 â”‚
â”‚  â””â”€ manage_settings      âœ…                                 â”‚
â”‚                                                             â”‚
â”‚  Role: EDITOR                                               â”‚
â”‚  â”œâ”€ view_content         âœ…                                 â”‚
â”‚  â”œâ”€ edit_content         âœ…                                 â”‚
â”‚  â”œâ”€ delete_content       âŒ                                 â”‚
â”‚  â”œâ”€ manage_users         âŒ                                 â”‚
â”‚  â””â”€ manage_settings      âŒ                                 â”‚
â”‚                                                             â”‚
â”‚  Role: VIEWER                                               â”‚
â”‚  â”œâ”€ view_content         âœ…                                 â”‚
â”‚  â”œâ”€ edit_content         âŒ                                 â”‚
â”‚  â”œâ”€ delete_content       âŒ                                 â”‚
â”‚  â”œâ”€ manage_users         âŒ                                 â”‚
â”‚  â””â”€ manage_settings      âŒ                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ImplementaciÃ³n:
- Decorador @requires_permission("edit_content")
- ValidaciÃ³n a nivel de endpoint
- Cascade en relaciones User â†â†’ Role â†â†’ Permission
```

---

## ğŸ“¦ Estructura de Directorios

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ v1/              # Endpoints versionados
â”‚   â”‚       â”œâ”€â”€ auth.py      # Login, registro, refresh
â”‚   â”‚       â”œâ”€â”€ projects.py  # CRUD de proyectos
â”‚   â”‚       â”œâ”€â”€ cms.py       # GestiÃ³n de contenido
â”‚   â”‚       â”œâ”€â”€ cv.py        # Subida/descarga CV
â”‚   â”‚       â”œâ”€â”€ settings.py  # ConfiguraciÃ³n del sitio
â”‚   â”‚       â””â”€â”€ users.py     # GestiÃ³n de usuarios
â”‚   â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ config.py        # Variables de entorno
â”‚   â”‚   â”œâ”€â”€ database.py      # ConexiÃ³n a PostgreSQL
â”‚   â”‚   â”œâ”€â”€ security.py      # JWT, bcrypt, permisos
â”‚   â”‚   â””â”€â”€ deps.py          # Dependencias inyectables
â”‚   â”‚
â”‚   â”œâ”€â”€ models/              # SQLAlchemy models
â”‚   â”‚   â”œâ”€â”€ user.py          # User, Role, Permission
â”‚   â”‚   â”œâ”€â”€ project.py       # Project, Technology
â”‚   â”‚   â”œâ”€â”€ cv.py            # CV storage
â”‚   â”‚   â””â”€â”€ page_content.py  # CMS content
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/             # Pydantic schemas
â”‚   â”‚   â”œâ”€â”€ user.py          # UserCreate, UserResponse
â”‚   â”‚   â”œâ”€â”€ project.py       # ProjectCreate, ProjectUpdate
â”‚   â”‚   â””â”€â”€ cms.py           # SectionCreate, SectionUpdate
â”‚   â”‚
â”‚   â”œâ”€â”€ services/            # Business logic
â”‚   â”‚   â”œâ”€â”€ auth_service.py  # Authentication logic
â”‚   â”‚   â”œâ”€â”€ project_service.py
â”‚   â”‚   â”œâ”€â”€ cms_service.py
â”‚   â”‚   â””â”€â”€ upload_service.py
â”‚   â”‚
â”‚   â””â”€â”€ main.py              # FastAPI app initialization
â”‚
â”œâ”€â”€ alembic/                 # Database migrations
â”‚   â””â”€â”€ versions/            # Migration files
â”‚
â”œâ”€â”€ uploads/                 # Persistent storage
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ files/
â”‚   â””â”€â”€ projects/
â”‚
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ Pipfile
â””â”€â”€ railway.toml             # Railway deployment config
```

---

## ğŸ”„ Flujo de Datos (CMS Example)

```
1. User clicks "Edit Section" (Frontend)
   â†“
2. SectionEditor.tsx opens modal
   â†“
3. Fetch current content: GET /api/v1/cms/home/hero
   â†“
4. User modifies content in visual editor
   â†“
5. Click "Save" â†’ PUT /api/v1/cms/home/hero
   {
     "content": { "title": "New Title", ... },
     "styles": { "height": "medium", "spacing": "relaxed" }
   }
   â†“
6. Backend validates JWT + permissions (@requires_permission("edit_content"))
   â†“
7. cms_service.py updates database
   â†“
8. Return updated section data
   â†“
9. Frontend updates cache + triggers re-render
   â†“
10. User sees changes immediately (no deployment needed)
```

---

## ğŸš€ TecnologÃ­as Clave

| CategorÃ­a | TecnologÃ­a | PropÃ³sito |
|-----------|-----------|-----------|
| **Framework** | FastAPI | API REST de alto rendimiento |
| **ORM** | SQLAlchemy | AbstracciÃ³n de base de datos |
| **Migraciones** | Alembic | Control de versiones de esquema |
| **Database** | PostgreSQL | Base de datos relacional |
| **Hosting DB** | Supabase | Managed PostgreSQL + RLS |
| **Auth** | JWT + bcrypt | AutenticaciÃ³n segura |
| **ValidaciÃ³n** | Pydantic | Schemas y validaciÃ³n de datos |
| **Deployment** | Railway | Platform-as-a-Service |
| **Storage** | Railway Volumes | Almacenamiento persistente |
| **Docs** | OpenAPI/Swagger | DocumentaciÃ³n automÃ¡tica |

---

## ğŸ“ˆ MÃ©tricas de Rendimiento

- **Tiempo de respuesta promedio**: < 100ms
- **AutenticaciÃ³n JWT**: Token vÃ¡lido por 24h
- **Conexiones DB**: Pool de 20 conexiones
- **Upload mÃ¡ximo**: 50MB por archivo
- **Formato imÃ¡genes**: JPEG, PNG, WebP
- **Rate limiting**: 100 requests/minuto por IP

---

## ğŸ”’ Seguridad Implementada

âœ… **AutenticaciÃ³n**: JWT con expiraciÃ³n configurable  
âœ… **AutorizaciÃ³n**: Sistema de roles y permisos granular  
âœ… **Passwords**: Hashing con bcrypt (12 rounds)  
âœ… **CORS**: Configurado para dominio especÃ­fico  
âœ… **SQL Injection**: ProtecciÃ³n via ORM (SQLAlchemy)  
âœ… **XSS**: SanitizaciÃ³n de inputs (Pydantic)  
âœ… **RLS**: Row Level Security en Supabase  
âœ… **HTTPS**: Certificado SSL en producciÃ³n (Railway)  
âœ… **Env vars**: Secrets protegidos en Railway  

---

## ğŸ“ Endpoints Principales

### Auth
- `POST /api/v1/auth/login` - Iniciar sesiÃ³n
- `POST /api/v1/auth/register` - Crear cuenta
- `GET /api/v1/auth/me` - Usuario actual

### Projects
- `GET /api/v1/projects` - Listar proyectos
- `POST /api/v1/projects` - Crear proyecto *(admin)*
- `PUT /api/v1/projects/{id}` - Actualizar *(admin/editor)*
- `DELETE /api/v1/projects/{id}` - Eliminar *(admin)*

### CMS
- `GET /api/v1/cms/{page}` - Obtener secciones de pÃ¡gina
- `GET /api/v1/cms/{page}/{section}` - SecciÃ³n especÃ­fica
- `PUT /api/v1/cms/{page}/{section}` - Actualizar contenido *(admin/editor)*
- `POST /api/v1/cms/{page}/sections` - Crear secciÃ³n *(admin)*
- `DELETE /api/v1/cms/{page}/{section}` - Eliminar *(admin)*

### Settings
- `GET /api/v1/settings/public` - ConfiguraciÃ³n pÃºblica
- `PUT /api/v1/settings` - Actualizar configuraciÃ³n *(admin)*

---

## ğŸ¯ Ventajas de esta Arquitectura

1. **Escalable**: SeparaciÃ³n clara de responsabilidades
2. **Mantenible**: CÃ³digo modular y organizado
3. **Testeable**: Servicios independientes y inyecciÃ³n de dependencias
4. **Documentado**: OpenAPI/Swagger automÃ¡tico
5. **Seguro**: MÃºltiples capas de seguridad
6. **Performante**: Queries optimizados y conexiones pool
7. **Versionado**: Endpoints versionados (/v1/), migraciones Alembic
8. **Type-safe**: Pydantic schemas + Python type hints

